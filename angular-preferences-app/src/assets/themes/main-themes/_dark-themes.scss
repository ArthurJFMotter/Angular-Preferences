@use 'sass:map';
@use '@angular/material' as mat;
@use 'theme-definitions' as defs;

.dark-mode {
  // 1. Generate standard dark themes for each density level
  @each $theme-name, $theme-config in defs.$themes {
    @for $i from 0 through 5 {
      &.#{$theme-name}-theme.density-#{$i} {
        @include mat.theme((
          color: (
            primary: map.get($theme-config, 'primary'),
            tertiary: map.get($theme-config, 'tertiary'),
            theme-type: dark
          ),
          density: -$i
        ));
      }
    }
  }

  // 2. Generate high-contrast dark theme overrides using the new central mixin.
  &.high-contrast-mode {
    @each $theme-name, $theme-config in defs.$themes {
      &.#{$theme-name}-theme {
        @include defs.apply-high-contrast($theme-name, dark);
      }
    }
  }
}
<div class="content-wrapper">
    <mat-card>
        <mat-card-header>
            <mat-card-title class="item-title">Appearance & Accessibility</mat-card-title>
        </mat-card-header>
        <mat-card-content>

            <!-- Dropdowns -->
            <section class="control-section row">
                <!-- Theme Color -->
                <mat-form-field appearance="outline" class="full-width-field">
                    <mat-label>Theme Color</mat-label>
                    <mat-select [value]="themeService.currentTheme().id"
                        (selectionChange)="preferencesService.setTheme($event.value)" aria-label="Select a theme color">
                        @for (theme of themeService.getThemes(); track theme.id) {
                        <mat-option [value]="theme.id">
                            <div class="theme-option">
                                <div class="color-preview" [style.background-color]="theme.primary"></div>
                                <span>{{ theme.displayName }}</span>
                            </div>
                        </mat-option>
                        }
                    </mat-select>
                </mat-form-field>

                <!-- Color Vision Filter -->
                <mat-form-field appearance="outline" class="full-width-field">
                    <mat-label>Color Vision Filter</mat-label>
                    <mat-select [value]="themeService.activeColorFilter()"
                        (selectionChange)="preferencesService.setColorFilter($event.value)"
                        aria-label="Select a color vision filter">
                        @for (filter of themeService.getDaltonicFilters(); track filter.id) {
                        <mat-option [value]="filter.id">{{ filter.displayName }}</mat-option>
                        }
                    </mat-select>
                </mat-form-field>
            </section>

            <!-- Toggles -->
            <div class="control-section row toggles">
                <mat-slide-toggle [checked]="themeService.isDarkMode()" (change)="preferencesService.toggleDarkMode()">
                    Dark Mode
                </mat-slide-toggle>
                <mat-slide-toggle [checked]="themeService.isHighContrastMode()"
                    (change)="preferencesService.toggleHighContrastMode()">
                    High Contrast Mode
                </mat-slide-toggle>
            </div>

        </mat-card-content>
    </mat-card>

    <mat-card>
        <mat-card-header>
            <mat-card-title class="item-title">Typography</mat-card-title>
        </mat-card-header>
        <mat-card-content>

            <!-- Font Family -->
            <section class="control-section">
                <mat-form-field appearance="outline" class="full-width-field">
                    <mat-label>Font Family</mat-label>
                    <mat-select [value]="typographyService.activeFont().id" (selectionChange)="onFontChange($event)"
                        aria-label="Select a font family">
                        @for (font of typographyService.getFonts(); track font.id) {
                        <mat-option [value]="font.id">{{ font.displayName }}</mat-option>
                        }
                    </mat-select>
                </mat-form-field>
            </section>

            <!-- Font Size -->
            <section class="control-section">
                <label id="font-size-label" class="slider-label">
                    Base Font Size: <strong>{{ typographyService.activeFontSize().displayName }} ({{
                        typographyService.activeFontSize().pixelValue }}px)</strong>
                </label>
                <mat-slider class="control-slider" [min]="minFontSizeIndex" [max]="maxFontSizeIndex" step="1" discrete>
                    <input matSliderThumb [value]="fontSizeSliderIndex()" (input)="onFontSizeChange($event)"
                        aria-labelledby="font-size-label">
                </mat-slider>
            </section>

            <!-- Density -->
            <section class="control-section">
                <label>
                    Density: <strong>{{ currentDensity().displayName }}</strong>
                </label>
                <mat-slider class="control-slider" [min]="minDensityIndex" [max]="maxDensityIndex" step="1" discrete>
                    <input matSliderThumb [value]="densitySliderIndex()" (input)="onDensityChange($event)"
                        aria-labelledby="density-slider-label">
                </mat-slider>
            </section>

        </mat-card-content>
    </mat-card>
</div>